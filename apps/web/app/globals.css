@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   CSS Custom Properties (Design Tokens)
   ============================================ */
:root {
  /* Colors mapped from Tailwind config */
  --color-primary: #3B82F6;
  --color-primary-hover: #2563EB;
  --color-primary-light: #EFF6FF;
  --color-secondary: #10B981;
  --color-secondary-hover: #059669;
  --color-secondary-light: #ECFDF5;

  /* Semantic colors */
  --color-success: #22C55E;
  --color-success-light: #F0FDF4;
  --color-warning: #F59E0B;
  --color-warning-light: #FFFBEB;
  --color-error: #EF4444;
  --color-error-light: #FEF2F2;
  --color-info: #3B82F6;
  --color-info-light: #EFF6FF;

  /* Surface colors */
  --color-surface-50: #FAFAFA;
  --color-surface-100: #F5F5F5;
  --color-surface-200: #E5E5E5;
  --color-surface-300: #D4D4D4;
  --color-surface-400: #A3A3A3;
  --color-surface-500: #737373;
  --color-surface-600: #525252;
  --color-surface-700: #404040;
  --color-surface-800: #262626;
  --color-surface-900: #171717;

  /* Typography */
  --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --font-mono: 'JetBrains Mono', Menlo, Monaco, monospace;

  /* Spacing */
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 1rem;
  --spacing-lg: 1.5rem;
  --spacing-xl: 2rem;

  /* Border radius */
  --radius-sm: 0.375rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.75rem;
  --radius-xl: 1rem;
  --radius-full: 9999px;

  /* Shadows */
  --shadow-xs: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-sm: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  --shadow-xl: 0 25px 50px -12px rgb(0 0 0 / 0.25);

  /* Transitions */
  --transition-fast: 150ms ease;
  --transition-normal: 200ms ease;
  --transition-slow: 300ms ease;
}

/* ============================================
   Base Styles
   ============================================ */
@layer base {
  html {
    font-family: var(--font-sans);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    @apply bg-surface-50 text-surface-900;
    min-height: 100vh;
  }

  /* Typography defaults */
  h1, h2, h3, h4, h5, h6 {
    @apply font-semibold text-surface-900;
  }

  h1 {
    @apply text-3xl tracking-tight;
  }

  h2 {
    @apply text-2xl tracking-tight;
  }

  h3 {
    @apply text-xl;
  }

  h4 {
    @apply text-lg;
  }

  p {
    @apply text-surface-600 leading-relaxed;
  }

  /* Focus styles for accessibility */
  :focus-visible {
    @apply outline-none ring-2 ring-primary-500 ring-offset-2;
  }

  /* Selection */
  ::selection {
    @apply bg-primary-100 text-primary-900;
  }
}

/* ============================================
   Component Classes
   ============================================ */
@layer components {
  /* ----------------------------------------
     Buttons
     ---------------------------------------- */
  .btn {
    @apply inline-flex items-center justify-center gap-2
           px-4 py-2.5
           font-medium text-sm
           rounded-lg
           transition-all duration-200
           focus:outline-none focus:ring-2 focus:ring-offset-2
           disabled:opacity-50 disabled:cursor-not-allowed disabled:pointer-events-none;
  }

  .btn-primary {
    @apply btn
           bg-primary-600 text-white
           hover:bg-primary-700
           active:bg-primary-800
           focus:ring-primary-500
           shadow-sm hover:shadow-md;
  }

  .btn-secondary {
    @apply btn
           bg-secondary-600 text-white
           hover:bg-secondary-700
           active:bg-secondary-800
           focus:ring-secondary-500
           shadow-sm hover:shadow-md;
  }

  .btn-outline {
    @apply btn
           bg-white text-surface-700
           border border-surface-300
           hover:bg-surface-50 hover:border-surface-400
           active:bg-surface-100
           focus:ring-primary-500;
  }

  .btn-ghost {
    @apply btn
           bg-transparent text-surface-600
           hover:bg-surface-100 hover:text-surface-900
           active:bg-surface-200
           focus:ring-primary-500;
  }

  .btn-danger {
    @apply btn
           bg-error-600 text-white
           hover:bg-error-700
           active:bg-error-700
           focus:ring-error-500
           shadow-sm hover:shadow-md;
  }

  .btn-success {
    @apply btn
           bg-success-600 text-white
           hover:bg-success-700
           active:bg-success-800
           focus:ring-success-500
           shadow-sm hover:shadow-md;
  }

  /* Button sizes */
  .btn-sm {
    @apply px-3 py-1.5 text-xs;
  }

  .btn-lg {
    @apply px-6 py-3 text-base;
  }

  .btn-icon {
    @apply p-2;
  }

  /* ----------------------------------------
     Form Inputs
     ---------------------------------------- */
  .input {
    @apply w-full px-4 py-2.5
           text-sm text-surface-900
           bg-white
           border border-surface-300 rounded-lg
           placeholder:text-surface-400
           transition-all duration-200
           hover:border-surface-400
           focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500;
  }

  .input-error {
    @apply input
           border-error-500
           focus:ring-error-500 focus:border-error-500;
  }

  .input-success {
    @apply input
           border-success-500
           focus:ring-success-500 focus:border-success-500;
  }

  /* Input with icon */
  .input-group {
    @apply relative;
  }

  .input-group .input {
    @apply pl-10;
  }

  .input-group-icon {
    @apply absolute left-3 top-1/2 -translate-y-1/2
           text-surface-400
           pointer-events-none;
  }

  /* Select */
  .select {
    @apply input
           appearance-none
           bg-no-repeat bg-right
           pr-10;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.75rem center;
    background-size: 1.25rem;
  }

  /* Textarea */
  .textarea {
    @apply input
           min-h-[100px]
           resize-y;
  }

  /* Label */
  .label {
    @apply block text-sm font-medium text-surface-700 mb-1.5;
  }

  /* Helper text */
  .helper-text {
    @apply text-xs text-surface-500 mt-1.5;
  }

  .error-text {
    @apply text-xs text-error-600 mt-1.5;
  }

  /* Form group */
  .form-group {
    @apply mb-4;
  }

  /* ----------------------------------------
     Phone Input (react-phone-number-input)
     ---------------------------------------- */
  .PhoneInput {
    @apply w-full flex items-center gap-2
           px-4 py-2.5
           bg-white
           border border-surface-300 rounded-lg
           transition-all duration-200
           hover:border-surface-400;
  }

  .PhoneInput:focus-within {
    @apply outline-none ring-2 ring-primary-500 border-primary-500;
  }

  .PhoneInputInput {
    @apply flex-1 min-w-0
           text-sm text-surface-900
           bg-transparent
           border-0
           placeholder:text-surface-400
           focus:outline-none focus:ring-0;
    padding: 0 !important;
  }

  .PhoneInputCountry {
    @apply flex items-center gap-1;
  }

  .PhoneInputCountrySelect {
    @apply border-0 bg-transparent
           text-sm text-surface-900
           cursor-pointer
           focus:outline-none focus:ring-0;
  }

  .PhoneInputCountryIcon {
    @apply flex-shrink-0;
  }

  .PhoneInputCountrySelectArrow {
    @apply text-surface-400 ml-1;
  }

  /* Location phone input variants */
  .location-phone-input .PhoneInput {
    @apply text-sm py-2;
  }

  .location-phone-input-success .PhoneInput:focus-within {
    @apply ring-2 ring-success-500 border-success-500;
  }

  .location-phone-input-primary .PhoneInput:focus-within {
    @apply ring-2 ring-primary-500 border-primary-500;
  }

  /* ----------------------------------------
     Cards
     ---------------------------------------- */
  .card {
    @apply bg-white rounded-xl
           border border-surface-200
           shadow-card
           transition-all duration-200;
  }

  .card-hover {
    @apply card
           hover:shadow-card-hover hover:border-surface-300
           cursor-pointer;
  }

  .card-body {
    @apply p-6;
  }

  .card-header {
    @apply px-6 py-4 border-b border-surface-200;
  }

  .card-footer {
    @apply px-6 py-4 border-t border-surface-100 bg-surface-50 rounded-b-xl;
  }

  .card-title {
    @apply text-lg font-semibold text-surface-900;
  }

  /* ----------------------------------------
     Badges
     ---------------------------------------- */
  .badge {
    @apply inline-flex items-center gap-1
           px-2.5 py-0.5
           text-xs font-medium
           rounded-full;
  }

  .badge-primary {
    @apply badge bg-primary-100 text-primary-700;
  }

  .badge-secondary {
    @apply badge bg-secondary-100 text-secondary-700;
  }

  .badge-success {
    @apply badge bg-success-100 text-success-700;
  }

  .badge-warning {
    @apply badge bg-warning-100 text-warning-700;
  }

  .badge-error {
    @apply badge bg-error-100 text-error-700;
  }

  .badge-info {
    @apply badge bg-info-100 text-info-700;
  }

  .badge-neutral {
    @apply badge bg-surface-100 text-surface-700;
  }

  /* ----------------------------------------
     Status Indicators
     ---------------------------------------- */
  .status-dot {
    @apply w-2 h-2 rounded-full;
  }

  .status-dot-success {
    @apply status-dot bg-success-500;
  }

  .status-dot-warning {
    @apply status-dot bg-warning-500;
  }

  .status-dot-error {
    @apply status-dot bg-error-500;
  }

  .status-dot-info {
    @apply status-dot bg-info-500;
  }

  .status-dot-neutral {
    @apply status-dot bg-surface-400;
  }

  /* Animated pulse dot */
  .status-dot-pulse {
    @apply relative;
  }

  .status-dot-pulse::after {
    content: '';
    @apply absolute inset-0 rounded-full animate-ping opacity-75;
    background: inherit;
  }

  /* ----------------------------------------
     Alerts
     ---------------------------------------- */
  .alert {
    @apply flex items-start gap-3
           p-4 rounded-lg
           text-sm;
  }

  .alert-success {
    @apply alert bg-success-50 text-success-800 border border-success-200;
  }

  .alert-warning {
    @apply alert bg-warning-50 text-warning-800 border border-warning-200;
  }

  .alert-error {
    @apply alert bg-error-50 text-error-800 border border-error-200;
  }

  .alert-info {
    @apply alert bg-info-50 text-info-800 border border-info-200;
  }

  /* ----------------------------------------
     Navigation
     ---------------------------------------- */
  .nav-link {
    @apply flex items-center gap-2
           px-3 py-2
           text-sm font-medium text-surface-600
           rounded-lg
           transition-colors duration-200
           hover:bg-surface-100 hover:text-surface-900;
  }

  .nav-link-active {
    @apply nav-link
           bg-primary-50 text-primary-700
           hover:bg-primary-100;
  }

  /* ----------------------------------------
     Dropdown / Menu
     ---------------------------------------- */
  .dropdown-menu {
    @apply absolute z-50
           min-w-[200px]
           bg-white
           border border-surface-200
           rounded-lg
           shadow-dropdown
           py-1
           animate-fade-in;
  }

  .dropdown-item {
    @apply flex items-center gap-2
           w-full px-4 py-2
           text-sm text-surface-700
           transition-colors duration-150
           hover:bg-surface-50;
  }

  .dropdown-item-danger {
    @apply dropdown-item text-error-600 hover:bg-error-50;
  }

  .dropdown-divider {
    @apply my-1 border-t border-surface-200;
  }

  /* ----------------------------------------
     Modal / Dialog
     ---------------------------------------- */
  .modal-backdrop {
    @apply fixed inset-0 z-40
           bg-surface-900/50
           backdrop-blur-sm
           animate-fade-in;
  }

  .modal {
    @apply fixed z-50
           top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2
           w-full max-w-md
           bg-white
           rounded-xl
           shadow-modal
           animate-scale-in;
  }

  .modal-header {
    @apply flex items-center justify-between
           px-6 py-4
           border-b border-surface-200;
  }

  .modal-body {
    @apply px-6 py-4;
  }

  .modal-footer {
    @apply flex items-center justify-end gap-3
           px-6 py-4
           border-t border-surface-100
           bg-surface-50
           rounded-b-xl;
  }

  /* ----------------------------------------
     Tables
     ---------------------------------------- */
  .table-container {
    @apply overflow-x-auto rounded-lg border border-surface-200;
  }

  .table {
    @apply w-full text-sm;
  }

  .table thead {
    @apply bg-surface-50 border-b border-surface-200;
  }

  .table th {
    @apply px-4 py-3
           text-left text-xs font-semibold text-surface-600 uppercase tracking-wider;
  }

  .table td {
    @apply px-4 py-3
           text-surface-700
           border-b border-surface-100;
  }

  .table tbody tr:last-child td {
    @apply border-b-0;
  }

  .table tbody tr:hover {
    @apply bg-surface-50;
  }

  /* ----------------------------------------
     Avatar
     ---------------------------------------- */
  .avatar {
    @apply relative inline-flex items-center justify-center
           rounded-full
           bg-primary-100 text-primary-700
           font-medium;
  }

  .avatar-sm {
    @apply avatar w-8 h-8 text-xs;
  }

  .avatar-md {
    @apply avatar w-10 h-10 text-sm;
  }

  .avatar-lg {
    @apply avatar w-12 h-12 text-base;
  }

  /* ----------------------------------------
     Skeleton Loading
     ---------------------------------------- */
  .skeleton {
    @apply bg-surface-200 rounded animate-pulse;
  }

  .skeleton-text {
    @apply skeleton h-4 w-full;
  }

  .skeleton-title {
    @apply skeleton h-6 w-3/4;
  }

  .skeleton-avatar {
    @apply skeleton rounded-full w-10 h-10;
  }

  .skeleton-card {
    @apply skeleton h-32 w-full rounded-xl;
  }

  /* ----------------------------------------
     Tooltip
     ---------------------------------------- */
  .tooltip {
    @apply absolute z-50
           px-2 py-1
           text-xs font-medium
           text-white bg-surface-900
           rounded
           whitespace-nowrap
           animate-fade-in;
  }

  /* ----------------------------------------
     Divider
     ---------------------------------------- */
  .divider {
    @apply border-t border-surface-200 my-4;
  }

  .divider-vertical {
    @apply border-l border-surface-200 h-full mx-2;
  }

  /* ----------------------------------------
     Container / Layout
     ---------------------------------------- */
  .page-container {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  .page-header {
    @apply mb-8;
  }

  .page-title {
    @apply text-2xl sm:text-3xl font-bold text-surface-900;
  }

  .page-subtitle {
    @apply text-surface-500 mt-1;
  }

  /* ----------------------------------------
     Stats Card
     ---------------------------------------- */
  .stat-card {
    @apply card card-body;
  }

  .stat-value {
    @apply text-3xl font-bold text-surface-900;
  }

  .stat-label {
    @apply text-sm text-surface-500 mt-1;
  }

  .stat-change {
    @apply text-xs font-medium mt-2;
  }

  .stat-change-positive {
    @apply stat-change text-success-600;
  }

  .stat-change-negative {
    @apply stat-change text-error-600;
  }

  /* ----------------------------------------
     Empty State
     ---------------------------------------- */
  .empty-state {
    @apply flex flex-col items-center justify-center
           py-12 px-4
           text-center;
  }

  .empty-state-icon {
    @apply w-16 h-16
           text-surface-300
           mb-4;
  }

  .empty-state-title {
    @apply text-lg font-semibold text-surface-900 mb-2;
  }

  .empty-state-description {
    @apply text-sm text-surface-500 mb-6 max-w-sm;
  }
}

/* ============================================
   Utility Classes
   ============================================ */
@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* Gradient text */
  .text-gradient {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-primary-600 to-secondary-500;
  }

  /* Hide scrollbar but allow scrolling */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Focus ring utilities */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2;
  }

  /* Truncate text with ellipsis */
  .line-clamp-1 {
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}
